(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const k="https://courselab.lnu.se/quiz/question/1",E=document.getElementById("name-form"),q=document.getElementById("start"),O=document.getElementById("submit"),S=document.getElementById("question"),m=document.getElementById("answer"),f=document.getElementById("radio-buttons"),v=document.getElementById("question-container");i("hide",v);const x=document.getElementById("result"),p=document.getElementById("result-div");i("hide",p);const h=document.getElementById("time"),R=document.getElementById("restart");let B="",u,g=0,l=[],I="";const d=document.getElementById("progress-bar");let b,w,c=[];function M(){clearInterval(w),setInterval(D(10),1e4)}function L(){d.style.transition="none",d.style.width="100%",d.style.backgroundColor="green"}function D(e){d.style.transition="all 1s linear",h.innerHTML="time: "+e+" s",w=setInterval(()=>{e-=1,e<0?y("Time's up <br> Game Over"):(e===5&&(d.style.backgroundColor="orange"),e===2&&(d.style.backgroundColor="red"),d.style.width=`${e/10*100}%`,h.innerHTML="time: "+e+" s")},1e3)}q.addEventListener("click",e=>{e.preventDefault();const t=document.getElementById("name");t.value===""?alert("Please write your name to be able to start the quiz"):N(t)});function H(e){B=e.value,e.value="",i("hide",E),i("show",v)}async function C(e,t=null){return t===null?await fetch(e):await fetch(e,t)}async function N(e){H(e);const t=await C(k);t.status===200?(u=Date.now(),T(await t.json())):(alert("Some problem occured!"),console.log("error occured"))}function T(e){clearInterval(b),S.innerHTML=e.question,"alternatives"in e?(g=1,i("hide",m),i("show",f),l=[],j(e.alternatives)):(g=0,i("show",m),i("hide",f)),"nextURL"in e&&(I=e.nextURL),b=M()}O.addEventListener("click",e=>{if(e.preventDefault(),g===0&&m.value==="")y("You Faild to answer the question!");else{const t=F(),n={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:g===0?m.value:t})};f.replaceChildren(),m.value="",U(I,n)}});async function U(e,t){const n=await C(e,t),r=await n.json();if(L(),n.status===200)if("nextURL"in r){const o=await fetch(r.nextURL);T(await o.json())}else u=(Date.now()-u)/1e3,c.push({name:B,time:u}),y("Congrats, You win! <br>"+r.message+"<br> time: "+u+" s");else n.status===400&&y(r.message+"<br> Game Over")}function j(e){for(const t in e){const n=document.createElement("label");n.classList.add("label"),n.innerText=e[t],n.name=t,n.id="0",f.appendChild(n),l.push(n),n.addEventListener("click",()=>{for(let r=0;r<l.length;r++)l[r].id==="1"&&l[r]!==n&&(l[r].id="0",l[r].style.borderColor="black",l[r].style.backgroundColor="rgba(0, 60, 255, 0.349)",l[r].style.border="1px solid");n.id=1,n.style.borderColor="blue",n.style.background="rgba(0, 60, 255, 0.5)",n.style.border="2px solid"})}}function F(){for(let e=0;e<l.length;e++)if(l[e].id==="1")return console.log(typeof l[e].name),l[e].name;return""}function i(e,t){e==="hide"?t.style.display="none":t.style.display="block"}function y(e){clearInterval(b),clearInterval(w),x.innerHTML=e,i("show",p),i("hide",h),i("hide",v),P()}function P(){const e=JSON.parse(localStorage.getItem("highScoreList"));e?.forEach(s=>c.push(s)),c.sort((s,a)=>s.time-a.time),c=c.slice(0,5),localStorage.setItem("highScoreList",JSON.stringify(c));const t=document.getElementById("score-table");t.replaceChildren();const n=document.createElement("thead"),r=document.createElement("tr");r.innerHTML="<th>name</th><th>Time</th>",n.appendChild(r),t.appendChild(n);const o=document.createElement("tbody");c.forEach(s=>{const a=document.createElement("tr");a.innerHTML=`<td>${s.name}</td><td>${s.time}</td>`,o.appendChild(a)}),t.appendChild(o),p.appendChild(t)}R.addEventListener("click",()=>{c=[],L(),i("hide",p),i("show",E),i("show",h)});
